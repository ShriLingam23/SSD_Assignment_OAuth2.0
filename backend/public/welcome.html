<!DOCTYPE html>
<html lang="en">
  <script>
    function getUserInfo() {
      //   alert("hihi");
      fetch("http://localhost:3000/api/user")
        // Parse the response as JSON
        .then((res) => res.json())
        .then((res) => {
          user = JSON.parse(res.body);
          console.log(user);
          document.getElementById("user_image").src = user.picture;
        })
        .catch((err) => alert(err));
    }
  </script>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Vision</title>
    <script
      class="jsbin"
      src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"
    ></script>
    <script src="./scripts/upload.js"></script>
    <link rel="stylesheet" href="./css/upload.css" />

    <link
      href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"
      rel="stylesheet"
    />
  </head>

  <body onload="getUserInfo();">
    <!-- Navigation Header -->
    <div>
      <nav class="bg-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex items-center justify-between h-16">
            <div class="flex items-center">
              <div class="flex-shrink-0">
                <img
                  class="h-8 w-8"
                  src="https://tailwindui.com/img/logos/workflow-mark-on-dark.svg"
                  alt="Workflow logo"
                />
              </div>
              <div class="hidden md:block">
                <div class="ml-10 flex items-baseline space-x-4">
                  <a
                    href="#"
                    class="px-3 py-2 rounded-md text-sm font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700"
                    >Upload</a
                  >
                </div>
              </div>
            </div>
            <div class="hidden md:block">
              <div class="ml-4 flex items-center md:ml-6">
                <button
                  class="p-1 border-2 border-transparent text-gray-400 rounded-full hover:text-white focus:outline-none focus:text-white focus:bg-gray-700"
                  aria-label="Notifications"
                >
                  <svg
                    class="h-6 w-6"
                    stroke="currentColor"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"
                    />
                  </svg>
                </button>

                <!-- Profile dropdown -->
                <div class="ml-3 relative">
                  <div>
                    <button
                      class="max-w-xs flex items-center text-sm rounded-full text-white focus:outline-none focus:shadow-solid"
                      id="user-menu"
                      aria-label="User menu"
                      aria-haspopup="true"
                      onclick="toggleUserPanel()"
                    >
                      <img
                        id="user_image"
                        class="h-8 w-8 rounded-full"
                        src="#"
                        alt="user"
                      />
                    </button>
                  </div>
                  <div
                    class="user-panel origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg"
                  >
                    <div
                      class="py-1 rounded-md bg-white shadow-xs"
                      role="menu"
                      aria-orientation="vertical"
                      aria-labelledby="user-menu"
                    >
                      <a
                        href="#"
                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                        role="menuitem"
                        >Your Profile</a
                      >

                      <a
                        href="#"
                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                        role="menuitem"
                        >Settings</a
                      >

                      <a
                        href="http://localhost:3000/"
                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                        role="menuitem"
                        >Sign out</a
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <header class="bg-white shadow">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
          <h1
            class="flex items-center text-3xl font-bold leading-tight text-gray-900"
          >
            <svg
              width="1em"
              height="1em"
              viewBox="0 0 16 16"
              class="bi bi-cloud-upload-fill mr-4"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M8 0a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 4.095 0 5.555 0 7.318 0 9.366 1.708 11 3.781 11H7.5V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11h4.188C14.502 11 16 9.57 16 7.773c0-1.636-1.242-2.969-2.834-3.194C12.923 1.999 10.69 0 8 0zm-.5 14.5V11h1v3.5a.5.5 0 0 1-1 0z"
              />
            </svg>
            Upload Picture
          </h1>
        </div>
      </header>

      <!-- ALERT: START -->
      <div class="alert-remove">
        <div
          class="bg-red-100 border-t-4 border-red-500 rounded-b text-red-900 px-4 py-3 shadow-md"
          role="alert"
        >
          <div class="flex">
            <div class="py-1">
              <svg
                class="fill-current h-6 w-6 text-red-500 mr-4"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
              >
                <path
                  d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"
                />
              </svg>
            </div>
            <div>
              <p class="font-bold">Removed</p>
              <p class="text-sm">Successfully Picture has been removed!</p>
            </div>
          </div>
        </div>
      </div>
      <div class="alert-success">
        <div
          class="bg-teal-100 border-t-4 border-teal-500 rounded-b text-teal-900 px-4 py-3 shadow-md"
          role="alert"
        >
          <div class="flex">
            <div class="py-1">
              <svg
                class="fill-current h-6 w-6 text-teal-500 mr-4"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
              >
                <path
                  d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"
                />
              </svg>
            </div>
            <div>
              <p class="font-bold">Successful</p>
              <p class="text-sm">Successfully Picture has been uploaded!</p>
            </div>
          </div>
        </div>
      </div>
      <!-- ALERT: END -->

      <main>
        <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
          <div class="px-4 py-6 sm:px-0">
            <div class="flex justify-center">
              <!-- border-4 border-dashed border-gray-200 rounded-lg h-96 -->

              <!-- FORM TO HANDLE UPLOAD IMAGE INTO DRIVE FUNCTION -->
              <form
                action="/api/upload"
                method="post"
                enctype="multipart/form-data"
                class="flex flex-col justify-around items-center pt-8"
              >
                <!-- LEFT: IMAGE UPLOAD CARD -->
                <div
                  class="file-upload-card flex bg-gray-200 rounded overflow-hidden shadow-lg rounded-lg"
                >
                  <!-- DISABLE:AFTER SHOWING IMAGE  -->
                  <div class="image-upload-wrap">
                    <input
                      class="file-upload-input"
                      type="file"
                      onchange="readURL(this);"
                      accept="image/*"
                      name="photo"
                    />
                    <div class="drag-text">
                      <h3>Drag and drop or select an Image</h3>
                    </div>
                  </div>
                  <!-- SHOW:AFTER SHOWING IMAGE -->
                  <img
                    class="w-full file-upload-image"
                    src="#"
                    alt="your image"
                  />
                  <!-- RIGHT: IMAGE DETAILS CARD -->
                  <div
                    class="file-upload flex flex-col justify-around items-center pt-8"
                  >
                    <!-- SHOW:AFTER SHOWING IMAGE -->
                    <button
                      class="flex bg-green-500 w-48 items-center hover:bg-white text-white hover:text-green-500 font-bold py-2 px-4 border border-green-500 hover:border-green rounded"
                      type="button"
                      onclick="$('.file-upload-input').trigger( 'click' )"
                    >
                      <svg
                        width="2em"
                        height="2em"
                        viewBox="0 0 16 16"
                        class="bi bi-aspect-ratio mr-4"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M0 3.5A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5v-9zM1.5 3a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"
                        />
                        <path
                          fill-rule="evenodd"
                          d="M2 4.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H3v2.5a.5.5 0 0 1-1 0v-3zm12 7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H13V8.5a.5.5 0 0 1 1 0v3z"
                        />
                      </svg>
                      Add Picture
                    </button>

                    <button
                      type="submit"
                      class="bg-blue-500 w-48 flex items-center hover:bg-white text-white hover:text-blue-500 font-bold mt-32 py-2 px-4 border border-blue-500 hover:border-blue rounded"
                      onclick="upload()"
                    >
                      <svg
                        width="2em"
                        height="2em"
                        viewBox="0 0 16 16"
                        class="bi bi-cloud-upload mr-4"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"
                        />
                        <path
                          fill-rule="evenodd"
                          d="M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"
                        />
                      </svg>
                      Upload
                    </button>

                    <button
                      type="button"
                      onclick="removeUpload()"
                      class="file-upload-content flex items-center w-48 bg-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white mt-32 py-2 px-4 border border-red-500 hover:border-transparent rounded"
                    >
                      <svg
                        width="2em"
                        height="2em"
                        viewBox="0 0 16 16"
                        class="bi bi-x mr-4"
                        fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"
                        />
                      </svg>
                      Remove
                    </button>

                    <div class="truncate remove-text">
                      <p class="font-normal">
                        Picture Name:
                        <span class="image-title"></span>
                      </p>
                    </div>
                  </div>
                </div>
                <!-- END: IMAGE UPLOAD CARD -->
              </form>
            </div>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
